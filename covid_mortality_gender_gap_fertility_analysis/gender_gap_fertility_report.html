<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>gender_gap_fertility_report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="covid_mortality_gender_gap_fertility_analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="covid_mortality_gender_gap_fertility_analysis_files/libs/quarto-html/quarto.js"></script>
<script src="covid_mortality_gender_gap_fertility_analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="covid_mortality_gender_gap_fertility_analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="covid_mortality_gender_gap_fertility_analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="covid_mortality_gender_gap_fertility_analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="covid_mortality_gender_gap_fertility_analysis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="covid_mortality_gender_gap_fertility_analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="covid_mortality_gender_gap_fertility_analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="covid_mortality_gender_gap_fertility_analysis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">gender_gap_fertility_report</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="part-1-cps-data-12-pt" class="level2">
<h2 class="anchored" data-anchor-id="part-1-cps-data-12-pt">Part 1: CPS data (12 pt)</h2>
<section id="import-the-dataset" class="level3">
<h3 class="anchored" data-anchor-id="import-the-dataset">1. Import the dataset</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary) </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(epiDisplay)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sandwich)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lmtest)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>gss <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"mfuerte1/econometrics/covid_mortality_gender_gap_fertility_analysis/gss_wages.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-datasummary-to-create-a-table-of-descriptive-statistics-that-includes-at-least-the-mean-and-the-sd-of-each-numerical-variable" class="level3">
<h3 class="anchored" data-anchor-id="use-datasummary-to-create-a-table-of-descriptive-statistics-that-includes-at-least-the-mean-and-the-sd-of-each-numerical-variable">2. Use datasummary to create a table of descriptive statistics that includes at least the mean and the SD of each numerical variable</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>datasummary_all <span class="ot">&lt;-</span> <span class="fu">datasummary</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">All</span>(gss) <span class="sc">~</span> Mean<span class="sc">*</span><span class="fu">Arguments</span>(<span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">+</span> SD<span class="sc">*</span><span class="fu">Arguments</span>(<span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> gss)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>datasummary_all</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_hw2n37dbsgh3714ujlzp(i, j, css_id) {
          var table = document.getElementById("tinytable_hw2n37dbsgh3714ujlzp");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_hw2n37dbsgh3714ujlzp');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_hw2n37dbsgh3714ujlzp(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_hw2n37dbsgh3714ujlzp");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 }, { i: 3, j: 2 }, { i: 4, j: 1 }, { i: 1, j: 2 }, { i: 2, j: 2 }, { i: 4, j: 2 }, { i: 5, j: 2 }, { i: 6, j: 2 },  ], css_id: 'tinytable_css_zoroener8rn2kkfxgyq3',}, 
          { positions: [ { i: 0, j: 1 }, { i: 0, j: 2 },  ], css_id: 'tinytable_css_li8t3v6vbiahzu4i4b61',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_jj4wo9qibe9kc260gw2o',}, 
          { positions: [ { i: 7, j: 1 }, { i: 7, j: 2 },  ], css_id: 'tinytable_css_gaj4v70x0fnmo5zojmc9',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 },  ], css_id: 'tinytable_css_dm4ap0af0ug6sxi3dp07',}, 
          { positions: [ { i: 7, j: 0 },  ], css_id: 'tinytable_css_6lvlkwu3g8fjfceub08x',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_hw2n37dbsgh3714ujlzp(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_zoroener8rn2kkfxgyq3, .table th.tinytable_css_zoroener8rn2kkfxgyq3 { text-align: right; }
      .table td.tinytable_css_li8t3v6vbiahzu4i4b61, .table th.tinytable_css_li8t3v6vbiahzu4i4b61 { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_jj4wo9qibe9kc260gw2o, .table th.tinytable_css_jj4wo9qibe9kc260gw2o { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_gaj4v70x0fnmo5zojmc9, .table th.tinytable_css_gaj4v70x0fnmo5zojmc9 { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_dm4ap0af0ug6sxi3dp07, .table th.tinytable_css_dm4ap0af0ug6sxi3dp07 { text-align: left; }
      .table td.tinytable_css_6lvlkwu3g8fjfceub08x, .table th.tinytable_css_6lvlkwu3g8fjfceub08x { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_hw2n37dbsgh3714ujlzp" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">Mean</th>
                <th scope="col">SD</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>rownames</td>
                  <td>30849.00</td>
                  <td>17810.53</td>
                </tr>
                <tr>
                  <td>year</td>
                  <td>1996.07</td>
                  <td>12.79</td>
                </tr>
                <tr>
                  <td>realrinc</td>
                  <td>22326.36</td>
                  <td>28581.79</td>
                </tr>
                <tr>
                  <td>age</td>
                  <td>46.18</td>
                  <td>17.56</td>
                </tr>
                <tr>
                  <td>occ10</td>
                  <td>4695.77</td>
                  <td>2627.72</td>
                </tr>
                <tr>
                  <td>prestg10</td>
                  <td>43.06</td>
                  <td>12.99</td>
                </tr>
                <tr>
                  <td>childs</td>
                  <td>1.92</td>
                  <td>1.76</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="notice-that-some-variables-do-not-appear-in-your-descriptive-tables.-this-is-because-these-are-text-variables-we-cant-average-male-and-female.-to-describe-these-variables-you-will-have-to-create-numerical-variables" class="level3">
<h3 class="anchored" data-anchor-id="notice-that-some-variables-do-not-appear-in-your-descriptive-tables.-this-is-because-these-are-text-variables-we-cant-average-male-and-female.-to-describe-these-variables-you-will-have-to-create-numerical-variables">3. Notice that some variables do not appear in your descriptive tables. This is because these are text variables (we can’t average “male” and “female”). To describe these variables you will have to create numerical variables</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>gss2 <span class="ot">&lt;-</span> gss <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender_b  =</span> <span class="fu">if_else</span>(gender <span class="sc">==</span> <span class="st">"Female"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_time =</span> <span class="fu">if_else</span>(wrkstat <span class="sc">==</span> <span class="st">"Full-Time"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Married   =</span> <span class="fu">if_else</span>(maritalcat <span class="sc">==</span> <span class="st">"Married"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">college   =</span> <span class="fu">if_else</span>(educcat <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Junior College"</span>, <span class="st">"Bachelor"</span>, <span class="st">"Graduate"</span>), <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tab1</span>(gss2<span class="sc">$</span>full_time, <span class="at">main=</span><span class="st">"Full-time (1) vs Other (0)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="covid_mortality_gender_gap_fertility_analysis/covid_mortality_gender_gap_fertility_analysis_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>gss2$full_time : 
        Frequency   %(NA+)   %(NA-)
0           31185     50.5     50.6
1           30491     49.4     49.4
&lt;NA&gt;           21      0.0      0.0
  Total     61697    100.0    100.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tab1</span>(gss2<span class="sc">$</span>Married, <span class="at">main=</span><span class="st">"Married (1) vs Others (0)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="covid_mortality_gender_gap_fertility_analysis/covid_mortality_gender_gap_fertility_analysis_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>gss2$Married : 
        Frequency   %(NA+)   %(NA-)
0           29777     48.3     48.3
1           31893     51.7     51.7
&lt;NA&gt;           27      0.0      0.0
  Total     61697    100.0    100.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tab1</span>(gss2<span class="sc">$</span>college, <span class="at">main=</span><span class="st">"College‐educated (1) vs Less (0)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="covid_mortality_gender_gap_fertility_analysis/covid_mortality_gender_gap_fertility_analysis_filesfigure-html/unnamed-chunk-3-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>gss2$college : 
        Frequency Percent Cum. percent
0           44248    71.7         71.7
1           17449    28.3        100.0
  Total     61697   100.0        100.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datasummary</span>( gender_b <span class="sc">+</span> full_time <span class="sc">+</span> Married <span class="sc">+</span> college <span class="sc">+</span> realrinc <span class="sc">+</span> age <span class="sc">+</span> prestg10 <span class="sc">+</span> childs <span class="sc">~</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    Mean<span class="sc">*</span><span class="fu">Arguments</span>(<span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">+</span> SD<span class="sc">*</span><span class="fu">Arguments</span>(<span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">data =</span> gss2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_bg5fqsks6zb4fjs9nu1k(i, j, css_id) {
          var table = document.getElementById("tinytable_bg5fqsks6zb4fjs9nu1k");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_bg5fqsks6zb4fjs9nu1k');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_bg5fqsks6zb4fjs9nu1k(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_bg5fqsks6zb4fjs9nu1k");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_ykvo3e3vkhlex165nfv0',}, 
          { positions: [ { i: 8, j: 0 },  ], css_id: 'tinytable_css_qtvxo6fcu8vnb3hsps0i',}, 
          { positions: [ { i: 8, j: 1 }, { i: 8, j: 2 },  ], css_id: 'tinytable_css_plo49077emg0ij6gs2jg',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 },  ], css_id: 'tinytable_css_iqtdv24fbrr7klvzm7x4',}, 
          { positions: [ { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 }, { i: 1, j: 1 }, { i: 6, j: 1 }, { i: 7, j: 1 }, { i: 3, j: 2 }, { i: 5, j: 1 }, { i: 1, j: 2 }, { i: 2, j: 2 }, { i: 7, j: 2 }, { i: 4, j: 2 }, { i: 5, j: 2 }, { i: 6, j: 2 },  ], css_id: 'tinytable_css_exha49xnftrd1sxvwbpg',}, 
          { positions: [ { i: 0, j: 1 }, { i: 0, j: 2 },  ], css_id: 'tinytable_css_3ntgq57g6oi8bmotr8r0',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_bg5fqsks6zb4fjs9nu1k(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_ykvo3e3vkhlex165nfv0, .table th.tinytable_css_ykvo3e3vkhlex165nfv0 { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_qtvxo6fcu8vnb3hsps0i, .table th.tinytable_css_qtvxo6fcu8vnb3hsps0i { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_plo49077emg0ij6gs2jg, .table th.tinytable_css_plo49077emg0ij6gs2jg { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_iqtdv24fbrr7klvzm7x4, .table th.tinytable_css_iqtdv24fbrr7klvzm7x4 { text-align: left; }
      .table td.tinytable_css_exha49xnftrd1sxvwbpg, .table th.tinytable_css_exha49xnftrd1sxvwbpg { text-align: right; }
      .table td.tinytable_css_3ntgq57g6oi8bmotr8r0, .table th.tinytable_css_3ntgq57g6oi8bmotr8r0 { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_bg5fqsks6zb4fjs9nu1k" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">Mean</th>
                <th scope="col">SD</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>gender_b</td>
                  <td>0.56</td>
                  <td>0.50</td>
                </tr>
                <tr>
                  <td>full_time</td>
                  <td>0.49</td>
                  <td>0.50</td>
                </tr>
                <tr>
                  <td>Married</td>
                  <td>0.52</td>
                  <td>0.50</td>
                </tr>
                <tr>
                  <td>college</td>
                  <td>0.28</td>
                  <td>0.45</td>
                </tr>
                <tr>
                  <td>realrinc</td>
                  <td>22326.36</td>
                  <td>28581.79</td>
                </tr>
                <tr>
                  <td>age</td>
                  <td>46.18</td>
                  <td>17.56</td>
                </tr>
                <tr>
                  <td>prestg10</td>
                  <td>43.06</td>
                  <td>12.99</td>
                </tr>
                <tr>
                  <td>childs</td>
                  <td>1.92</td>
                  <td>1.76</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="using-ggplot-create-a-graph-of-income-and-age." class="level3">
<h3 class="anchored" data-anchor-id="using-ggplot-create-a-graph-of-income-and-age.">5. Using ggplot, create a graph of income and age.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gss2, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> realrinc)) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age (years)"</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Real Income (1986 USD)"</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"GSS: Real Income vs. Age"</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="covid_mortality_gender_gap_fertility_analysis/covid_mortality_gender_gap_fertility_analysis_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-does-the-relationship-between-age-and-income-suggest-is-it-a-linear-relationship" class="level3">
<h3 class="anchored" data-anchor-id="what-does-the-relationship-between-age-and-income-suggest-is-it-a-linear-relationship">6. What does the relationship between age and income suggest? Is it a linear relationship?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The income and age are not linearly related, they are in a way appear as a bell curvem whereby the peak of income around 50 and then beggins to decline. From age 20 to 50 income has a tendancy to increase.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="regress-income-and-gender.-correct-for-heteroskedasticity-and-present-your-result-in-a-modelsummary-table." class="level3">
<h3 class="anchored" data-anchor-id="regress-income-and-gender.-correct-for-heteroskedasticity-and-present-your-result-in-a-modelsummary-table.">7. Regress income and gender. Correct for heteroskedasticity and present your result in a modelsummary table.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(realrinc <span class="sc">~</span> gender_b, <span class="at">data =</span> gss2)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(m1, <span class="at">vcov =</span> <span class="st">"robust"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_9569ath2c0yqgw6xz1jc(i, j, css_id) {
          var table = document.getElementById("tinytable_9569ath2c0yqgw6xz1jc");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_9569ath2c0yqgw6xz1jc');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_9569ath2c0yqgw6xz1jc(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_9569ath2c0yqgw6xz1jc");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_z32ntpnclqt5gm32pg59',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 8, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 }, { i: 7, j: 1 }, { i: 12, j: 1 }, { i: 9, j: 1 }, { i: 10, j: 1 }, { i: 11, j: 1 },  ], css_id: 'tinytable_css_xfod7uli42fulfko29g0',}, 
          { positions: [ { i: 4, j: 0 },  ], css_id: 'tinytable_css_nrilsq7wb3yzqqknehb8',}, 
          { positions: [ { i: 13, j: 0 },  ], css_id: 'tinytable_css_e5jobxlkbnkhr0boi8ak',}, 
          { positions: [ { i: 13, j: 1 },  ], css_id: 'tinytable_css_6sh48yqgjvhvd4mj11hr',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_6n0kxt58nl6evg2aa7g5',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 8, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 }, { i: 12, j: 0 }, { i: 9, j: 0 }, { i: 10, j: 0 }, { i: 11, j: 0 },  ], css_id: 'tinytable_css_3vaoarchysolpsdyj0c0',}, 
          { positions: [ { i: 4, j: 1 },  ], css_id: 'tinytable_css_2n8vshl7o994fxp1sf1d',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_9569ath2c0yqgw6xz1jc(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_z32ntpnclqt5gm32pg59, .table th.tinytable_css_z32ntpnclqt5gm32pg59 { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_xfod7uli42fulfko29g0, .table th.tinytable_css_xfod7uli42fulfko29g0 { text-align: center; }
      .table td.tinytable_css_nrilsq7wb3yzqqknehb8, .table th.tinytable_css_nrilsq7wb3yzqqknehb8 { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_e5jobxlkbnkhr0boi8ak, .table th.tinytable_css_e5jobxlkbnkhr0boi8ak { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_6sh48yqgjvhvd4mj11hr, .table th.tinytable_css_6sh48yqgjvhvd4mj11hr { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_6n0kxt58nl6evg2aa7g5, .table th.tinytable_css_6n0kxt58nl6evg2aa7g5 { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_3vaoarchysolpsdyj0c0, .table th.tinytable_css_3vaoarchysolpsdyj0c0 { text-align: left; }
      .table td.tinytable_css_2n8vshl7o994fxp1sf1d, .table th.tinytable_css_2n8vshl7o994fxp1sf1d { text-align: center; border-bottom: solid black 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_9569ath2c0yqgw6xz1jc" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>(Intercept)</td>
                  <td>28504.111</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(247.380)</td>
                </tr>
                <tr>
                  <td>gender_b</td>
                  <td>-12474.364</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(285.233)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>37887</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.048</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.048</td>
                </tr>
                <tr>
                  <td>AIC</td>
                  <td>883156.2</td>
                </tr>
                <tr>
                  <td>BIC</td>
                  <td>883181.8</td>
                </tr>
                <tr>
                  <td>Log.Lik.</td>
                  <td>-441575.111</td>
                </tr>
                <tr>
                  <td>F</td>
                  <td>1912.653</td>
                </tr>
                <tr>
                  <td>RMSE</td>
                  <td>27892.62</td>
                </tr>
                <tr>
                  <td>Std.Errors</td>
                  <td>HC3</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## vcovHC()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="give-the-interpretation-of-the-constant-and-its-significance-level" class="level3">
<h3 class="anchored" data-anchor-id="give-the-interpretation-of-the-constant-and-its-significance-level">8. Give the interpretation of the constant and its significance level</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># t = 28504.111 / 247.380 = 115.224</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># The intercept (β₀ = 28 504.111, SE = 247.380) is the model’s prediction of real income for the reference group, which here is men (gender_b = 0). Numerically, it means that men earn on average $28 504.11 (in 1986 USD). </span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  p-value ≪ 0.001, so the intercept is highly statistically significant.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="give-the-interpretation-of-the-coeﬀicient-and-its-significance-level" class="level3">
<h3 class="anchored" data-anchor-id="give-the-interpretation-of-the-coeﬀicient-and-its-significance-level">9. Give the interpretation of the coeﬀicient and its significance level</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># t = -12474.364 / 285.233 = -43.73394</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># The coefficient on gender_b (β₁ = –12 474.364, SE = 285.233) measures the difference in mean income between women (gender_b = 1) and men (gender_b = 0). Concretely, it says that women earn $12 474.36 less on average than men. </span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># p-value ≪ 0.001, so this gap is also highly statistically significant.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="does-this-mean-that-women-are-discriminated-on-the-labor-market-why-or-why-not" class="level3">
<h3 class="anchored" data-anchor-id="does-this-mean-that-women-are-discriminated-on-the-labor-market-why-or-why-not">10. Does this mean that women are discriminated on the labor market? Why or why not?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a raw gender pay gap — it doesn’t control for differences in hours worked, occupation, education, experience, or other productivity‐related factors.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="add-the-variable-full_time-into-the-regression-and-present-your-regression-in-a-modelsummary-table-together-with-the-result-from-question-7" class="level3">
<h3 class="anchored" data-anchor-id="add-the-variable-full_time-into-the-regression-and-present-your-regression-in-a-modelsummary-table-together-with-the-result-from-question-7">11. Add the variable full_time into the regression and present your regression in a modelsummary table together with the result from question 7</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(realrinc <span class="sc">~</span> gender_b <span class="sc">+</span> full_time, <span class="at">data =</span> gss2)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(m1, m2),</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vcov =</span> <span class="st">"HC1"</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">statistic =</span> <span class="st">"conf.int"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_j79wu11bj04kmg0getso(i, j, css_id) {
          var table = document.getElementById("tinytable_j79wu11bj04kmg0getso");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_j79wu11bj04kmg0getso');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_j79wu11bj04kmg0getso(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_j79wu11bj04kmg0getso");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_rl0apazzyoajp9h6gpdb',}, 
          { positions: [ { i: 6, j: 1 }, { i: 6, j: 2 },  ], css_id: 'tinytable_css_pqfrya8ojb6fauyxf919',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 4, j: 1 }, { i: 5, j: 1 }, { i: 3, j: 2 }, { i: 7, j: 1 }, { i: 8, j: 1 }, { i: 9, j: 1 }, { i: 10, j: 1 }, { i: 11, j: 1 }, { i: 12, j: 1 }, { i: 13, j: 1 }, { i: 14, j: 1 }, { i: 12, j: 2 }, { i: 3, j: 1 }, { i: 1, j: 2 }, { i: 2, j: 2 }, { i: 7, j: 2 }, { i: 4, j: 2 }, { i: 5, j: 2 }, { i: 10, j: 2 }, { i: 11, j: 2 }, { i: 8, j: 2 }, { i: 9, j: 2 }, { i: 14, j: 2 }, { i: 13, j: 2 },  ], css_id: 'tinytable_css_ktktwb5thpt9evuldkkm',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 }, { i: 5, j: 0 }, { i: 10, j: 0 }, { i: 7, j: 0 }, { i: 8, j: 0 }, { i: 9, j: 0 }, { i: 14, j: 0 }, { i: 11, j: 0 }, { i: 12, j: 0 }, { i: 13, j: 0 },  ], css_id: 'tinytable_css_jc7b12s1zcqtb77d7eur',}, 
          { positions: [ { i: 15, j: 0 },  ], css_id: 'tinytable_css_j3eusvp68qbgps8fbqt7',}, 
          { positions: [ { i: 0, j: 1 }, { i: 0, j: 2 },  ], css_id: 'tinytable_css_f0w09dxi6dqegxvs76h6',}, 
          { positions: [ { i: 15, j: 1 }, { i: 15, j: 2 },  ], css_id: 'tinytable_css_cp0cwnhdvd1aurtuylge',}, 
          { positions: [ { i: 6, j: 0 },  ], css_id: 'tinytable_css_5kjqflhsnfnfuupnepgu',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_j79wu11bj04kmg0getso(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_rl0apazzyoajp9h6gpdb, .table th.tinytable_css_rl0apazzyoajp9h6gpdb { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_pqfrya8ojb6fauyxf919, .table th.tinytable_css_pqfrya8ojb6fauyxf919 { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_ktktwb5thpt9evuldkkm, .table th.tinytable_css_ktktwb5thpt9evuldkkm { text-align: center; }
      .table td.tinytable_css_jc7b12s1zcqtb77d7eur, .table th.tinytable_css_jc7b12s1zcqtb77d7eur { text-align: left; }
      .table td.tinytable_css_j3eusvp68qbgps8fbqt7, .table th.tinytable_css_j3eusvp68qbgps8fbqt7 { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_f0w09dxi6dqegxvs76h6, .table th.tinytable_css_f0w09dxi6dqegxvs76h6 { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_cp0cwnhdvd1aurtuylge, .table th.tinytable_css_cp0cwnhdvd1aurtuylge { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_5kjqflhsnfnfuupnepgu, .table th.tinytable_css_5kjqflhsnfnfuupnepgu { text-align: left; border-bottom: solid black 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_j79wu11bj04kmg0getso" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
                <th scope="col">(2)</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>(Intercept)</td>
                  <td>28504.111</td>
                  <td>18595.935</td>
                </tr>
                <tr>
                  <td></td>
                  <td>[28019.253, 28988.970]</td>
                  <td>[18050.329, 19141.542]</td>
                </tr>
                <tr>
                  <td>gender_b</td>
                  <td>-12474.364</td>
                  <td>-10714.618</td>
                </tr>
                <tr>
                  <td></td>
                  <td>[-13033.415, -11915.314]</td>
                  <td>[-11257.256, -10171.980]</td>
                </tr>
                <tr>
                  <td>full_time</td>
                  <td></td>
                  <td>12614.604</td>
                </tr>
                <tr>
                  <td></td>
                  <td></td>
                  <td>[12107.736, 13121.472]</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>37887</td>
                  <td>37887</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.048</td>
                  <td>0.086</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.048</td>
                  <td>0.086</td>
                </tr>
                <tr>
                  <td>AIC</td>
                  <td>883156.2</td>
                  <td>881589.4</td>
                </tr>
                <tr>
                  <td>BIC</td>
                  <td>883181.8</td>
                  <td>881623.5</td>
                </tr>
                <tr>
                  <td>Log.Lik.</td>
                  <td>-441575.111</td>
                  <td>-440790.675</td>
                </tr>
                <tr>
                  <td>F</td>
                  <td>1912.753</td>
                  <td>1929.835</td>
                </tr>
                <tr>
                  <td>RMSE</td>
                  <td>27892.62</td>
                  <td>27321.06</td>
                </tr>
                <tr>
                  <td>Std.Errors</td>
                  <td>HC1</td>
                  <td>HC1</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="what-do-you-notice-about-the-size-of-the-pay-gap-when-controlling-for-full_time" class="level3">
<h3 class="anchored" data-anchor-id="what-do-you-notice-about-the-size-of-the-pay-gap-when-controlling-for-full_time">12. What do you notice about the size of the pay gap when controlling for full_time?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># B^_gender = -12474.364</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># B^_gender OR Full-Time = -10714.618</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Raw gap falls by 22% when we hold constant whether someone works full‐time.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="why-do-you-think-controlling-for-the-variable-full-time-affect-the-pay-gap-coeﬀicient" class="level3">
<h3 class="anchored" data-anchor-id="why-do-you-think-controlling-for-the-variable-full-time-affect-the-pay-gap-coeﬀicient">13. Why do you think controlling for the variable full time affect the pay gap coeﬀicient ?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Because full_time is a strong predictor of earnings (its coefficient is +$12,614) and—importantly—is unequally distributed by gender. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="what-do-these-results-suggest-about-the-correlation-between-gender-and-full_time" class="level3">
<h3 class="anchored" data-anchor-id="what-do-these-results-suggest-about-the-correlation-between-gender-and-full_time">14. What do these results suggest about the correlation between gender and full_time?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adding full_time both raises R² and reduces the gender gap implies that gender and full-time status are positively correlated for men</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># full_time has a large positive effect on income</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Women are less likely than men to be in the full-time category</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># gender_b and full_time are correlated, and that controlling for work‐status is essential before attributing the remaining gap to other factors</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="verify-your-intuition-about-the-covariance-between-gender_l-and-full_time-using-r" class="level3">
<h3 class="anchored" data-anchor-id="verify-your-intuition-about-the-covariance-between-gender_l-and-full_time-using-r">14. Verify your intuition about the covariance between gender_l and full_time using R?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cov</span>(gss2<span class="sc">$</span>gender_b, gss2<span class="sc">$</span>full_time, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.0544135</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(gss2<span class="sc">$</span>gender_b, gss2<span class="sc">$</span>full_time, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.2192838</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Negative Covariance</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="part-2-fertility" class="level2">
<h2 class="anchored" data-anchor-id="part-2-fertility">Part 2: Fertility</h2>
<section id="import-the-fertility-dataset-in-r" class="level3">
<h3 class="anchored" data-anchor-id="import-the-fertility-dataset-in-r">1. Import the fertility dataset in R</h3>
</section>
<section id="morekids-in-the-dataset-is-a-text-variable.-if-you-want-to-use-morekids-as-an-outcome-variable-in-a-regression-you-will-have-to-transform-it-into-a-binary-variable.-generate-a-new-variable-morekids_b-that-takes-value-1-when-morekids-is-yesand-0-otherwise" class="level3">
<h3 class="anchored" data-anchor-id="morekids-in-the-dataset-is-a-text-variable.-if-you-want-to-use-morekids-as-an-outcome-variable-in-a-regression-you-will-have-to-transform-it-into-a-binary-variable.-generate-a-new-variable-morekids_b-that-takes-value-1-when-morekids-is-yesand-0-otherwise">2. Morekids in the dataset is a text variable. If you want to use morekids as an outcome variable in a regression you will have to transform it into a binary variable. Generate a new variable morekids_b that takes value 1 when morekids is “yes”and 0 otherwise</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>fert <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"mfuerte1/econometrics/covid_mortality_gender_gap_fertility_analysis/Fertility.csv"</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>fert<span class="sc">$</span>morekids_b <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(fert<span class="sc">$</span>morekids <span class="sc">==</span> <span class="st">"yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>fert<span class="sc">$</span>boy1 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(fert<span class="sc">$</span>gender1 <span class="sc">==</span> <span class="st">"male"</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-morekids_b-to-show-that-the-probability-of-having-more-than-2-kids-declines-when-the-first-kid-is-a-boy." class="level3">
<h3 class="anchored" data-anchor-id="use-morekids_b-to-show-that-the-probability-of-having-more-than-2-kids-declines-when-the-first-kid-is-a-boy.">3. Use morekids_b to show that the probability of having more than 2 kids declines when the first kid is a boy.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(morekids_b <span class="sc">~</span> boy1, <span class="at">data =</span> fert, <span class="at">FUN =</span> mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  boy1 morekids_b
1    0  0.3851055
2    1  0.3762750</code></pre>
</div>
</div>
</section>
<section id="interpret-your-regression-3" class="level3">
<h3 class="anchored" data-anchor-id="interpret-your-regression-3">4. Interpret your regression 3</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(morekids_b <span class="sc">~</span> boy1, <span class="at">data =</span> fert)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = morekids_b ~ boy1, data = fert)

Coefficients:
(Intercept)         boy1  
   0.385106    -0.008831  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  38.51 percent of families whose first child is a daughter say they’d like another.</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># when boy1 = 1 there, there is a probability that families with a first‐born son are, on average, 0.8831 percentage points less likely to want an additional child than families</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># in other words...</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co">#P(want more kids | 1st child = girl) ≈ 0.3851</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># P(want more kids | 1st child = boy) </span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ≈ 0.3851 – 0.008831 = 0.3763  </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>
